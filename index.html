<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Admin SMPN 2 Kejayan</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* --- GITHUB COLOR PALETTE --- */
            --gh-bg: #f6f8fa;          /* Background Abu-abu */
            --gh-border: #d0d7de;      /* Garis Batas Halus */
            --gh-text-main: #24292f;   /* Teks Utama (Hitam Pudar) */
            --gh-text-muted: #57606a;  /* Teks Kedua (Abu-abu) */
            --gh-link: #0969da;        /* Biru Link GitHub */
            --gh-sidebar-bg: #f6f8fa;  
            --gh-white: #ffffff;
            --gh-hover: #f3f4f6;
            --sidebar-width: 280px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            background-color: var(--gh-white);
            color: var(--gh-text-main);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* --- LAYOUT UTAMA --- */
        .wrapper {
            display: flex;
            min-height: 100vh;
        }

        /* --- SIDEBAR (Desktop: Fixed, Mobile: Hidden) --- */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--gh-sidebar-bg);
            border-right: 1px solid var(--gh-border);
            display: flex;
            flex-direction: column;
            position: fixed; /* Kunci sidebar di kiri */
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        /* Header Sidebar */
        .sidebar-header {
            padding: 16px;
            border-bottom: 1px solid var(--gh-border);
            display: flex;
            align-items: center;
            background: var(--gh-sidebar-bg);
        }
        .brand-logo {
            width: 32px; height: 32px;
            border-radius: 50%;
            border: 1px solid var(--gh-border);
            margin-right: 12px;
        }
        .brand-text {
            font-size: 14px;
            font-weight: 600;
            color: var(--gh-text-main);
        }

        /* Menu List Sidebar */
        .sidebar-menu {
            padding: 16px 8px;
            overflow-y: auto;
        }
        .menu-category {
            font-size: 12px;
            font-weight: 600;
            color: var(--gh-text-muted);
            margin: 16px 8px 8px;
            text-transform: uppercase;
        }
        .nav-item {
            display: flex;
            align-items: center;
            padding: 8px;
            margin-bottom: 2px;
            border-radius: 6px;
            color: var(--gh-text-main);
            text-decoration: none;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .nav-item:hover {
            background-color: rgba(208, 215, 222, 0.32);
            text-decoration: none;
            color: var(--gh-text-main);
        }
        .nav-item.active {
            background-color: rgba(208, 215, 222, 0.48);
            font-weight: 600;
        }
        .nav-item i {
            width: 24px;
            text-align: center;
            color: var(--gh-text-muted);
            margin-right: 8px;
        }

        /* --- MAIN CONTENT --- */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width); /* Geser konten ke kanan sebesar lebar sidebar */
            background-color: var(--gh-white);
            display: flex;
            flex-direction: column;
            width: calc(100% - var(--sidebar-width));
        }

        /* Top Navbar (Mobile Hamburger & Desktop Breadcrumb) */
        .top-bar {
            padding: 16px 24px;
            border-bottom: 1px solid var(--gh-border);
            background-color: var(--gh-sidebar-bg);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .breadcrumb-custom {
            font-size: 14px;
            color: var(--gh-text-muted);
        }
        .breadcrumb-active {
            font-weight: 600;
            color: var(--gh-text-main);
        }

        /* Tombol Hamburger (Hanya Mobile) */
        .mobile-toggle {
            display: none; /* Sembunyi di Desktop */
            background: none;
            border: 1px solid var(--gh-border);
            border-radius: 6px;
            padding: 4px 8px;
            color: var(--gh-text-muted);
            cursor: pointer;
            margin-right: 12px;
        }

        /* --- CONTENT AREA (WORKFLOW LIST STYLE) --- */
        .content-body {
            padding: 24px;
            background-color: var(--gh-white);
        }

        /* Kotak Putih dengan Border (Github Card Style) */
        .gh-card {
            background: var(--gh-white);
            border: 1px solid var(--gh-border);
            border-radius: 6px;
            overflow: hidden;
        }
        .gh-card-header {
            background-color: var(--gh-bg);
            padding: 12px 16px;
            border-bottom: 1px solid var(--gh-border);
            font-weight: 600;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* List Items (Pengganti Kartu Besar) */
        .workflow-item {
            padding: 12px 16px;
            border-bottom: 1px solid var(--gh-border);
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: background 0.1s;
        }
        .workflow-item:last-child { border-bottom: none; }
        .workflow-item:hover { background-color: var(--gh-bg); }
        
        .status-icon {
            margin-right: 12px;
            color: #1a7f37; /* Github Green */
            font-size: 16px;
        }
        .workflow-info { flex: 1; }
        .workflow-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--gh-text-main);
            margin-bottom: 2px;
        }
        .workflow-meta {
            font-size: 12px;
            color: var(--gh-text-muted);
        }
        .workflow-action {
            font-size: 12px;
            color: var(--gh-text-muted);
        }

        /* IFRAME CONTAINER (Efisien tanpa scroll) */
        .app-wrapper {
            display: none; /* Default Hidden */
            height: calc(100vh - 120px);
            background: white;
            border-radius: 6px;
            border: 1px solid var(--gh-border);
            overflow: hidden;
            position: relative;
        }
        .full-frame { width: 100%; height: 100%; border: none; }
        
        .loader {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: var(--gh-text-muted); font-size: 14px;
            display: flex; flex-direction: column; align-items: center;
        }

        /* --- OVERLAY MOBILE --- */
        .overlay {
            display: none;
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5); z-index: 900;
        }

        /* --- RESPONSIVE MOBILE --- */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%); /* Sembunyi ke kiri */
                width: 250px;
            }
            .sidebar.active { transform: translateX(0); }
            .overlay.active { display: block; }
            
            .main-content { margin-left: 0; width: 100%; }
            .mobile-toggle { display: block; }
            
            .content-body { padding: 16px; }
        }
    </style>
</head>
<body>

    <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

    <div class="wrapper">
        
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="https://media-cgk2-2.cdn.whatsapp.net/v/t61.24694-24/420072465_408331761989045_7523445308360792099_n.jpg?ccb=11-4&oh=01_Q5Aa3AGtGrwAg7i8NAilZUGMgGbJcqTpJEWM7CR-Jx3wQ9XIsw&oe=6921BFE5&_nc_sid=5e03e0&_nc_cat=103" 
                     onerror="this.src='https://cdn-icons-png.flaticon.com/512/3771/3771321.png'"
                     class="brand-logo" alt="Logo">
                <div class="brand-text">SMPN 2 Kejayan</div>
            </div>

            <div class="sidebar-menu">
                <div class="nav-item active" onclick="showDashboard()">
                    <i class="fas fa-home"></i> Dashboard
                </div>

                <div class="menu-category">Administrasi</div>
                <div class="nav-item" onclick="showPlaceholder('Kurikulum')">
                    <i class="far fa-folder"></i> Adm. Kurikulum
                </div>
                <div class="nav-item" onclick="showPlaceholder('Kesiswaan')">
                    <i class="far fa-user"></i> Adm. Kesiswaan
                </div>
                <div class="nav-item" onclick="showPlaceholder('Umum')">
                    <i class="far fa-building"></i> Adm. Umum
                </div>

                <div class="menu-category">Settings</div>
                <div class="nav-item">
                    <i class="fas fa-cog"></i> Pengaturan
                </div>
            </div>
        </nav>


        <main class="main-content">
            
            <div class="top-bar">
                <div class="d-flex align-items-center">
                    <button class="mobile-toggle" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="breadcrumb-custom">
                        SMPN 2 Kejayan <span class="mx-2">/</span> <span class="breadcrumb-active" id="page-title">Dashboard</span>
                    </div>
                </div>
                <button id="btn-back" class="btn btn-sm btn-outline-secondary d-none" onclick="closeApp()">
                    <i class="fas fa-arrow-left me-1"></i> Kembali
                </button>
            </div>

            <div class="content-body">
                
                <div id="dashboard-list">
                    <div class="gh-card">
                        <div class="gh-card-header">
                            All Workflows (Aplikasi)
                        </div>
                        
                        <div class="workflow-item" onclick="openApp('mbg')">
                            <i class="fas fa-check-circle status-icon"></i>
                            <div class="workflow-info">
                                <div class="workflow-title">Aplikasi MBG (Makan Bergizi Gratis)</div>
                                <div class="workflow-meta">Input kehadiran makan harian siswa</div>
                            </div>
                            <div class="workflow-action">Buka <i class="fas fa-chevron-right ms-1"></i></div>
                        </div>

                        <div class="workflow-item" onclick="openApp('ifp')">
                            <i class="fas fa-check-circle status-icon"></i>
                            <div class="workflow-info">
                                <div class="workflow-title">Jadwal & Booking IFP</div>
                                <div class="workflow-meta">Cek ketersediaan Lab IFP</div>
                            </div>
                            <div class="workflow-action">Buka <i class="fas fa-chevron-right ms-1"></i></div>
                        </div>

                        <div class="workflow-item" onclick="openApp('kuitansi')">
                            <i class="fas fa-check-circle status-icon"></i>
                            <div class="workflow-info">
                                <div class="workflow-title">Generator Kuitansi Digital</div>
                                <div class="workflow-meta">Alat bantu cetak kuitansi sekolah</div>
                            </div>
                            <div class="workflow-action">Buka <i class="fas fa-chevron-right ms-1"></i></div>
                        </div>
                    </div>

                    <div class="gh-card mt-4">
                        <div class="gh-card-header">
                            Recent Activity
                        </div>
                        <div class="p-3 text-muted small">
                            Belum ada aktivitas terbaru hari ini.
                        </div>
                    </div>
                </div>


                <div id="app-view" class="app-wrapper">
                    <div class="loader" id="loader">
                        <div class="spinner-border text-secondary mb-2" role="status"></div>
                        <span>Memuat Aplikasi...</span>
                    </div>
                    <iframe id="main-frame" class="full-frame" src=""></iframe>
                </div>
                
                <div id="placeholder-view" class="d-none text-center py-5">
                    <i class="fas fa-tools fa-3x text-muted mb-3"></i>
                    <h4 id="placeholder-title">Halaman</h4>
                    <p class="text-muted">Fitur ini sedang dalam pengembangan.</p>
                </div>

            </div>
        </main>
    </div>

    <script>
        // --- LOGIKA TOGGLE SIDEBAR MOBILE ---
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');

        function toggleSidebar() {
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        // --- DATABASE URL APLIKASI ---
        const apps = {
            'mbg': { title: 'Aplikasi MBG', url: 'https://script.google.com/macros/s/AKfycbwRbF02PGfw8b6T2tNjENlviF-_7YM4jy2g8owfZ8awlmzQJv43NJ2Web7YIN8BvtoAoQ/exec' },
            'ifp': { title: 'Jadwal IFP', url: 'https://script.google.com/macros/s/AKfycbwoi4BO9FfAqKi7Twy_3EQmXWoGGoB8DHWM3vJAbvpmfn7FkBNsTfM4C8J93xvNl46q/exec' },
            'kuitansi': { title: 'Kuitansi', url: 'https://heri228-cell.github.io/aplikasi-kuitansi/' }
        };

        // --- LOGIKA NAVIGASI ---
        const dashboardList = document.getElementById('dashboard-list');
        const appView = document.getElementById('app-view');
        const placeholderView = document.getElementById('placeholder-view');
        const mainFrame = document.getElementById('main-frame');
        const pageTitle = document.getElementById('page-title');
        const btnBack = document.getElementById('btn-back');
        const loader = document.getElementById('loader');

        function showDashboard() {
            // Reset Tampilan ke Menu Utama
            dashboardList.classList.remove('d-none');
            appView.style.display = 'none';
            placeholderView.classList.add('d-none');
            
            // Reset Navbar
            pageTitle.textContent = 'Dashboard';
            btnBack.classList.add('d-none');
            
            // Reset Iframe (Hemat Memori)
            mainFrame.src = 'about:blank';
            
            // Tutup Sidebar di Mobile
            if(window.innerWidth <= 768) toggleSidebar();
        }

        function openApp(appKey) {
            const app = apps[appKey];
            
            // 1. Sembunyikan List Menu
            dashboardList.classList.add('d-none');
            placeholderView.classList.add('d-none');
            
            // 2. Tampilkan Container App
            appView.style.display = 'block';
            btnBack.classList.remove('d-none');
            pageTitle.textContent = app.title;
            
            // 3. Load Iframe
            loader.style.display = 'flex';
            mainFrame.style.opacity = '0';
            mainFrame.src = app.url;
            
            mainFrame.onload = function() {
                loader.style.display = 'none';
                mainFrame.style.opacity = '1';
            };
        }
        
        function closeApp() {
            showDashboard();
        }

        function showPlaceholder(titleName) {
            dashboardList.classList.add('d-none');
            appView.style.display = 'none';
            placeholderView.classList.remove('d-none');
            
            document.getElementById('placeholder-title').textContent = titleName;
            pageTitle.textContent = titleName;
            
            if(window.innerWidth <= 768) toggleSidebar();
        }
    </script>
</body>
</html>
